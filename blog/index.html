<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<link rel="stylesheet" href="/index.css" />
	<script type="text/javascript" src="/index.js"></script>

	<title>David Koloski</title>
</head>
<body>
	<div class="header">
		<a href="/" class="logo-header">
			<div class="overlay"></div>
		</a>
		<script type="text/javascript">
			WriteNavigation();
		</script>
		<div class="tagline">
			David Koloski - Game Developer
		</div>
	</div>
	<div class="header-proxy"></div>
	<div class="body">
		<div class="content">
			<div class="blogpost" id="HowToKillYourFramerateWithUnitysBuiltinUI">
				<h1>How to kill your framerate with Unity's builtin UI</h1>
				<p>Unity's new UI system is really great, and can speed up development and make handling multiple devices and resolutions quick and painless. But there also lie dragons. A couple of the common and provided patterns for Unity's UI can lead to extreme FPS drops. Here are a few you should look out for:</p>
				<h3>Text Shadows Considered Harmful</h3>
				<p>Unity's Shadow component is an easy way to add depth and character to UI elements. But beware placing it on text! Every time the text is changed, the Shadow component must process every character quad in the text and modify them to add a shadow. While this may not be an issue for mostly static text or text with a single shadow component, text that changes often or uses multiple shadow components will lead to extremely large FPS spikes!</p>
				<h4>What you should do instead:</h4>
				<p>You should make a custom font from the one being used and add a shadow to the font texture. A great program for generating bitmap fonts for this is <a href="http://www.angelcode.com/products/bmfont/">AngelCode's BMFont</a>, which allows you to add padding to characters in a font texture so you can add shadows in an image editor.</p>
				<h4>When this won't work:</h4>
				<p>If your font texture must be dynamic (for example, if you can't be sure of your character set ahead of time), then this definitely won't work. In this case, the best route is either to leave off the shadow or stop changing the text so often.</p>
				<h3>SetActive(...) Considered Harmful</h3>
				<p>Activating and deactivating UI elements using SetActive(...) forces the UI system to rebuild the UI layout of the GameObject <em>and all its children</em>. This can lead to FPS drops when large pieces of UI is enabled or disabled, as the UI system may have to relayout a panel and all its children. Most of the time the content of panels will simply appear or disappear, which should not require any layout at all.</p>
				<h4>What you should do instead:</h4>
				<p>Instead of calling SetActive(...), add a Canvas Group onto the root object that SetActive(...) is being called on. Instead of deactivating it, set alpha to 0, interactable to false, and blocks raycasts to false. Instead of activating it, set alpha to 1, interactable to true, and blocks raycasts to true. If you also need to remove the element from the UI layout it's a part of, add a Layout Element to it and set ignore layout to true or false when it's deactivated or activate respectively.</p>
				<h4>When this won't work:</h4>
				<p>If your object's layout needs to be rebuilt anyway (due to changing content) or removing it from its layout will cause a huge relayout anyway, the performance benefits from avoiding SetActive(...) may help with FPS drops but probably will not alleviate them. Instead, you should consider avoiding layout with areas of UI that change a lot, or with the root object itself.</p>
				<h3>Summary:</h3>
				<p>You should be on the lookout for FPS drops while using Unity's new UI system. Big hits to your framerate may come from very unexpected places, and there are often easy workarounds that will fix them for your situation.</p>
				<p>Questions? Clarifications? Complaints? Contact me at <a href="mailto:djkoloski@gmail.com">djkoloski@gmail.com</a>.</p>
			</div>
		</div>
		<div class="clear"></div>
	</div>
	<div class="footer">
		<div class="social">
			<a href="https://github.com/djkoloski">
				<img alt="Github" src="/img/social-github.png" />
				<img alt="Github" class="overlay" src="/img/social-github-blue.png" />
			</a>
			<a href="https://twitter.com/koloskidj">
				<img alt="Twitter" src="/img/social-twitter.png" />
				<img alt="Twitter" class="overlay" src="/img/social-twitter-blue.png" />
			</a>
			<a href="https://facebook.com/djkoloski">
				<img alt="Facebook" src="/img/social-facebook.png" />
				<img alt="Facebook" class="overlay" src="/img/social-facebook-blue.png" />
			</a>
		</div>
		Copyright &copy;
		<script type="text/javascript">
			document.write((new Date()).getFullYear())
		</script>
		<a href="mailto:djkoloski@gmail.com">David Koloski</a>
	</div>
</body>
</html>
